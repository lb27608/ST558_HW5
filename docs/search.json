[
  {
    "objectID": "ST558_HW5.html",
    "href": "ST558_HW5.html",
    "title": "ST 558 Homework 5: Exploratory Data Analysis",
    "section": "",
    "text": "In this homework assignment, we’ll use data from two Portuguese secondary schools from the UCI machine learninng repository to perform some exploratory data analysis. First, we’ll read in the datasets for math and Portuguese scores and then merge the datasets in two different ways. Next, we’ll explore the data by computing some summaries for both categorical and numeric variables."
  },
  {
    "objectID": "ST558_HW5.html#analysis-of-categorical-variables",
    "href": "ST558_HW5.html#analysis-of-categorical-variables",
    "title": "ST 558 Homework 5: Exploratory Data Analysis",
    "section": "Analysis of Categorical Variables",
    "text": "Analysis of Categorical Variables\nWe’ll start the exploratory analysis by creating a series of contingency tables, beginning with a one-way table for extra support:\n\ntab1 &lt;- table(ad_combined$schoolsupF)\ntab1\n\n\n   Extra support No extra support \n              43              277 \n\n\nWe see that most students (277 out of 320) do not receive extra support. Let’s now look at how study time varies between those who receive support and those who don’t:\n\ntab2 &lt;- table(ad_combined$schoolsupF,ad_combined$studytimeF)\ntab2\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support          10           24             5         4\n  No extra support       71          133            51        22\n\n\nOverall, study time doesn’t appear to vary much based on extra support status. The most frequent category of study time is 2 to 5 hours in both groups (24 out of 43 in the extra support group and 133 out of 277 in the no extra support group).\nNext, let’s check to see if there is any evidence of maternal education level having an effect on the distribution of these study times by support status:\n\ntab3 &lt;- table(ad_combined$schoolsupF,ad_combined$studytimeF,ad_combined$FeduF)\ntab3\n\n, ,  = None\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support           0            0             0         0\n  No extra support        0            1             0         1\n\n, ,  = Primary education\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support           2            3             0         1\n  No extra support       19           20             8         4\n\n, ,  = 5th to 9th grade\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support           2            8             0         1\n  No extra support       16           37            15        10\n\n, ,  = Secondary education\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support           2            7             3         2\n  No extra support       15           38            12         5\n\n, ,  = Higher education\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support           4            6             2         0\n  No extra support       21           37            16         2\n\n\nWe’ll next look at a conditional distribution of support status given that for students whose mothers received higher education, first using data filtering:\n\ntab_filtered &lt;- ad_combined |&gt; filter(FeduF==\"Higher education\")\ntable(tab_filtered$schoolsupF,tab_filtered$studytimeF)\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support           4            6             2         0\n  No extra support       21           37            16         2\n\n\nand next by subsetting the 3-way table created above:\n\ntab3[, ,\"Higher education\"]\n\n                  \n                   &lt;2 hours 2 to 5 hours 5 to 10 hours &gt;10 hours\n  Extra support           4            6             2         0\n  No extra support       21           37            16         2\n\n\nNow let’s use the tidyverse to create a two-way contingency table of study time by support status to see that we get the same result shown earlier:\n\nad_combined |&gt; group_by(schoolsupF,studytimeF) |&gt; summarize(count=n()) |&gt; pivot_wider(names_from=studytimeF,values_from=count)\n\n`summarise()` has grouped output by 'schoolsupF'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 2 × 5\n# Groups:   schoolsupF [2]\n  schoolsupF       `&lt;2 hours` `2 to 5 hours` `5 to 10 hours` `&gt;10 hours`\n  &lt;fct&gt;                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;       &lt;int&gt;\n1 Extra support            10             24               5           4\n2 No extra support         71            133              51          22\n\n\nFinally, let’s create a couple of graphs. First, a stacked bar chart showing the distribution of study times by maternal education level:\n\nstacked_bar &lt;- ggplot(data = ad_combined, aes(x = MeduF, fill = studytimeF)) + geom_bar() + labs(x = \"Maternal educational level\", y = \"N\", title=\"Study time by maternal educational level\") + scale_fill_discrete(\"Study Time\") + scale_x_discrete(guide = guide_axis(n.dodge=2)) + theme(plot.title = element_text(hjust = 0.5))\nstacked_bar\n\n\n\n\n\n\n\n\nNext, we’ll plot the same two variables in a side-by-side bar graph:\n\nside_bar &lt;- ggplot(data = ad_combined, aes(x = MeduF, fill = studytimeF)) + geom_bar(position = \"dodge\") + labs(x = \"Maternal educational level\", y = \"N\", title=\"Study time by maternal educational level\") + scale_fill_discrete(\"Study Time\") + scale_x_discrete(guide = guide_axis(n.dodge=2)) + theme(plot.title = element_text(hjust = 0.5))\nside_bar\n\n\n\n\n\n\n\n\nWe can see again that the most frequently observed maternal educational level is higher education, but both graphs show that the distributions of student study time within education levels are similar."
  },
  {
    "objectID": "ST558_HW5.html#analysis-of-numerical-variables",
    "href": "ST558_HW5.html#analysis-of-numerical-variables",
    "title": "ST 558 Homework 5: Exploratory Data Analysis",
    "section": "Analysis of Numerical Variables",
    "text": "Analysis of Numerical Variables\nFor the first summary, we’ll compute the mean, median, and range for age and the two final grade variables:\n\nad_combined |&gt; summarize(across(c(age,G3.x,G3.y),list(\"mean\"=mean,\"median\"=median,\"sd\"=sd),.names=\"{.fn}_{.col}\"))\n\n# A tibble: 1 × 9\n  mean_age median_age sd_age mean_G3.x median_G3.x sd_G3.x mean_G3.y median_G3.y\n     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;\n1     16.5         16   1.14      11.0          11    4.30      12.9          13\n# ℹ 1 more variable: sd_G3.y &lt;dbl&gt;\n\n\nWe see that the median age is 16, and that the average final score in Portuguese (mean = 12.88) is higher than the final score in math (mean = 11.04). Let’s break it down further by computing these summary statistics according to support status:\n\nad_combined |&gt; group_by(schoolsupF) |&gt; summarize(across(c(age,G3.x,G3.y),list(\"mean\"=mean,\"median\"=median,\"sd\"=sd),.names=\"{.fn}_{.col}\"))\n\n# A tibble: 2 × 10\n  schoolsupF  mean_age median_age sd_age mean_G3.x median_G3.x sd_G3.x mean_G3.y\n  &lt;fct&gt;          &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n1 Extra supp…     15.9         16  0.956      9.58          10    2.99      11.5\n2 No extra s…     16.6         17  1.14      11.3           11    4.43      13.1\n# ℹ 2 more variables: median_G3.y &lt;dbl&gt;, sd_G3.y &lt;dbl&gt;\n\n\nHere, we notice that those who received extra support were younger, on average, than those who did not. The extra support group also had mean final grades which were lower than those with no extra support. Let’s now group by maternal education:\n\nad_combined |&gt; group_by(schoolsupF,MeduF) |&gt; summarize(across(c(age,G3.x,G3.y),list(\"mean\"=mean,\"median\"=median,\"sd\"=sd),.names=\"{.fn}_{.col}\"))\n\n`summarise()` has grouped output by 'schoolsupF'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 9 × 11\n# Groups:   schoolsupF [2]\n  schoolsupF      MeduF mean_age median_age sd_age mean_G3.x median_G3.x sd_G3.x\n  &lt;fct&gt;           &lt;fct&gt;    &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;\n1 Extra support   Prim…     16.2       16    1.26       9.75         9.5   0.957\n2 Extra support   5th …     15.8       15.5  0.931     10.8         10.5   2.59 \n3 Extra support   Seco…     15.5       15.5  0.527      9.5         11     2.46 \n4 Extra support   High…     16.2       16    1.09       8.08         8     3.71 \n5 No extra suppo… None      16.5       16.5  0.707     15           15     0    \n6 No extra suppo… Prim…     16.9       17    1.13       9.55        10     3.99 \n7 No extra suppo… 5th …     16.7       17    0.993     10.0         11     4.80 \n8 No extra suppo… Seco…     16.8       17    1.21      11.2         11     4.50 \n9 No extra suppo… High…     16.4       16    1.17      12.5         13     3.96 \n# ℹ 3 more variables: mean_G3.y &lt;dbl&gt;, median_G3.y &lt;dbl&gt;, sd_G3.y &lt;dbl&gt;\n\n\nWithin the extra support group, the mean and median ages are notably lower for students whose mothers in the 5th to 9th grade and secondary education groups compared to all other groups.\nTo examine associations between the numeric variables, we can compute the linear (Pearson) correlation for each pair of the numeric variables as a matrix:\n\nad_combined |&gt; select(age,absences.x,absences.y,G1.x,G1.y,G2.x,G2.y,G3.x,G3.y) |&gt; cor()\n\n                    age  absences.x  absences.y        G1.x        G1.y\nage         1.000000000  0.14392517  0.04733182 -0.11037935 -0.05054968\nabsences.x  0.143925170  1.00000000  0.56381559 -0.06946116 -0.09247761\nabsences.y  0.047331821  0.56381559  1.00000000 -0.08760610 -0.09864117\nG1.x       -0.110379348 -0.06946116 -0.08760610  1.00000000  0.59293522\nG1.y       -0.050549678 -0.09247761 -0.09864117  0.59293522  1.00000000\nG2.x       -0.186187399 -0.07580245 -0.12636236  0.86588796  0.54300736\nG2.y        0.029366456 -0.14516402 -0.12070727  0.59517224  0.88415041\nG3.x       -0.206031862 -0.02811847 -0.11664046  0.81859418  0.52288461\nG3.y       -0.009103257 -0.13572638 -0.07145201  0.54388734  0.82541432\n                  G2.x        G2.y        G3.x         G3.y\nage        -0.18618740  0.02936646 -0.20603186 -0.009103257\nabsences.x -0.07580245 -0.14516402 -0.02811847 -0.135726385\nabsences.y -0.12636236 -0.12070727 -0.11664046 -0.071452010\nG1.x        0.86588796  0.59517224  0.81859418  0.543887345\nG1.y        0.54300736  0.88415041  0.52288461  0.825414320\nG2.x        1.00000000  0.56521350  0.91357599  0.496032649\nG2.y        0.56521350  1.00000000  0.54545279  0.894309821\nG3.x        0.91357599  0.54545279  1.00000000  0.475956497\nG3.y        0.49603265  0.89430982  0.47595650  1.000000000\n\n\nWe notice here that each individual period score is highly correlated with the final score, within subject: for example, the correlation for the first period math grade and the final math grade is 0.818.\nTo explore some of the numerical data graphically, we’ll first create a histogram of the final math grades by support status:\n\nhist_1 &lt;- ggplot(ad_combined, aes(x=G3.x, fill=schoolsupF)) + geom_histogram(binwidth=2,alpha=0.4) + theme(plot.title = element_text(hjust = 0.4)) + labs(x=\"Final math grade\", y=\"N\", title=\"Final math grade by support received\") + scale_fill_manual(\"Support\",values = c(\"Extra support\" = \"blue\", \"No extra support\" = \"green\"))\n                                                                                  \nhist_1\n\n\n\n\n\n\n\n\nThis histogram suggests that students who received extra support tended to be less likely to receive higher final grades, but it’s not clear. We can create a kernel density plot of the same information:\n\nkernel_1 &lt;- ggplot(ad_combined, aes(x=G3.x, fill=schoolsupF)) + geom_density(alpha=0.5) + theme(plot.title = element_text(hjust = 0.5)) + labs(x=\"Final math grade\", y=\"N\", title=\"Final math grade by support received\") + scale_fill_manual(\"Support\",values = c(\"Extra support\" = \"blue\", \"No extra support\" = \"green\"))\nkernel_1\n\n\n\n\n\n\n\n\nThis plot more clearly shows that students who received extra support were less likely to receive final math grades on the higher end of the scale. Let’s create a boxplot to visually check the mean and variation for the final math grades:\n\nbox_1 &lt;- ggplot(ad_combined, aes(x=schoolsupF, y=G3.x, fill=schoolsupF)) + geom_boxplot() + theme(plot.title = element_text(hjust = 0.5)) + labs(x=\"Support status\", y=\"Final math grade\", title=\"Final math grade by support received\") + scale_fill_manual(\"Support\",values = c(\"Extra support\" = \"blue\", \"No extra support\" = \"green\"))\nbox_1\n\n\n\n\n\n\n\n\nWe can see that students who received extra support had a median final grade that was only slightly lower than those didn’t receive extra support, but that more members of extra support group had grades toward the lower end of the scale.\nFinally, we’ll examine a few scatterplots related to the final math grade:\n\nscatter_1&lt;- ggplot(ad_combined, aes(x = absences.x, y = G3.x, color = schoolsupF)) + geom_point(position=\"jitter\") + labs(x=\"Absences\", y=\"Final math grade\", title=\"Final math grade vs. number of absences\", subtitle=\"By support status\", color=\"Support status\") + theme(plot.title = element_text(hjust = 0.5),plot.subtitle = element_text(hjust = 0.5))\nscatter_1\n\n\n\n\n\n\n\n\nThere are no clearly discernable differences between the support status groups, but we do see that all of the students who finished with a zero grade also had no absences.\nNow let’s compare the final math grade to the grade received during the first period:\n\nscatter_1&lt;- ggplot(ad_combined, aes(x = G1.x, y = G3.x, color = schoolsupF)) + geom_point(position=\"jitter\") + labs(x=\"First period math grade\", y=\"Final math grade\", title=\"Final math grade vs. first period math grade\", subtitle=\"By support status\", color=\"Support status\") + theme(plot.title = element_text(hjust = 0.5), plot.subtitle=element_text(hjust = 0.5))\nscatter_1\n\n\n\n\n\n\n\n\nAs we saw in the correlation matrix, there is a positive association between the grade received in the first period and the final math grade overall, and plot shows that the association holds for students who received extra support and those who didn’t. An interesting point here is that several students who did not receive support received a final grade of zero despite having first period grades ranging from 6 to 8, compared to only 1 student who received extra support.\nWe can use faceting to get the same kind of scatterplots for each level of study time:\n\nscatter_2&lt;- ggplot(ad_combined, aes(x = G1.x, y = G3.x, color = schoolsupF)) + geom_point(position=\"jitter\") + labs(x=\"First period math grade\", y=\"Final math grade\", title=\"Final math grade vs. first period math grade\", subtitle=\"By support status and study time\", color=\"Support status\") + theme(plot.title = element_text(hjust = 0.5), plot.subtitle=element_text(hjust = 0.5)) + facet_wrap(~studytimeF)\nscatter_2\n\n\n\n\n\n\n\n\nThese plots reveal that the positive relationship holds across each level of study time. We also see that the one student with extra support whom we noted earlier had received final grade of zero despite a first period grade of between 6 and 8 averaged more than 10 hours of study time.\nFinally, we’ll facet by another categorical variable (father’s education) to get a grid of scatterplots, one for each level of educational attainment:\n\nscatter_3&lt;- ggplot(ad_combined, aes(x = G1.x, y = G3.x, color = schoolsupF)) + geom_point(position=\"jitter\") + labs(x=\"First period math grade\", y=\"Final math grade\", title=\"Final math grade vs. first period math grade\", subtitle=\"By support status, study time, and paternal education\", color=\"Support status\") + theme(plot.title = element_text(hjust = 0.5), plot.subtitle=element_text(hjust = 0.5)) + facet_grid(FeduF ~ schoolsupF)\nscatter_3"
  }
]